<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pag01</title>
    <link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="retrato.css">
    <link rel="stylesheet" href="paisagem.css">
</head>
<body>
    <!-- CabeÃ§alho da Pagina contendo o icone do site, os botos rapidos-->
    <header>
        <nav>
            <img src="imagens/favicon.ico" alt="filmes Driver">
            <ul type="none" id="categoria">
                <li><a href="index.html">Home</a></li>
                <li><a href="#">filmes</a></li>
                <li><a href="#">series</a></li>
                <li><a href="#">Categorias</a></li>
            </ul>
            <ul id="acesso">
                <li id="singup"><a onclick="clicksingup()">Singup</a></li>
                <li id="login"><a onclick="clicklogin()">Login</a></li>
            </ul>
        </nav>
    </header>

    <!-- Parte onde vai ficar passando os banes de alguns filmes-->
    <section id="banner">
            <form id="pesquisa">
                <label for="ipesquisar"><button><img src="imagens/lupa.png" alt=""></button></label>
                <input type="text" name="pesquisar" id="ipesquisar" placeholder="pesquisar">
            </form>
    </section>

    <!--Conteudo principal do site-->
    <main>
        <div id="no_cinema">
            <div class="nomes">
                <h2>No Cinema</h2>
                <p><a href="#">Ver Mais</a></p>
            </div>
            <hr>
            <div class="carrosel">
                <button onclick="rolar('no_cinema',-1)" class="seta_rolagem"><img src="imagens/seta-esquerda.png" alt="seta_esquerda"></button>
                <div class="classconteudo">
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                </div>
                <button onclick="rolar('no_cinema',1)" class="seta_rolagem"><img src="imagens/seta-direita.png" alt="seta_direita">
                </button>
            </div>
        </div>
        
        <div id="top_filmes">
            <div class="nomes">
                <h2>Top Filmes</h2>
                <p><a href="#">Ver Mais</a></p>
            </div>
            <hr>
            <div class="carrosel">
                <button onclick="rolar('top_filmes',-1)" class="seta_rolagem"><img src="imagens/seta-esquerda.png" alt="seta_esquerda"></button>
                <div class="classconteudo">
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                </div>
                <button onclick="rolar('top_filmes',1)" class="seta_rolagem"><img src="imagens/seta-direita.png" alt="seta_direita">
                </button>
            </div>
        </div>
       
        <div id="top_series">
            <div class="nomes">
                <h2>Top Series</h2>
                <p><a href="#">Ver Mais</a></p>
            </div>
            <hr>
            <div class="carrosel">
                <button onclick="rolar('top_series',-1)" class="seta_rolagem"><img src="imagens/seta-esquerda.png" alt="seta_esquerda"></button>
                <div class="classconteudo">
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                </div>
                <button onclick="rolar('top_series',1)" class="seta_rolagem"><img src="imagens/seta-direita.png" alt="seta_direita">
                </button>
            </div>
        </div>
        
        <div id="top_animes">
            <div class="nomes">
                <h2>Animes Populares</h2>
                <p><a href="#">Ver Mais</a></p>
            </div>
            <hr>
            <div class="carrosel">
                <button onclick="rolar('top_animes',-1)" class="seta_rolagem"><img src="imagens/seta-esquerda.png" alt="seta_esquerda"></button>
                <div class="classconteudo">
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                    <div class="conteudo"></div>
                </div>
                <button onclick="rolar('top_animes',1)" class="seta_rolagem"><img src="imagens/seta-direita.png" alt="seta_direita">
                </button>
            </div>
        </div>
        <br>

    </main>

    <!--Conteudo pesquisado-->
    <div id="contpesquisado"></div>

    <!--Pagina de cadastro-->
    <div class="cadastro" id="pagsingup">
        <fieldset>
            <legend><h1>Cadastre-se</h1></legend>
            <img src="imagens/botao-x.png" alt="X" onclick="fechar()" id="xfechar">
            <label for="iemail">E-mail</label><br>
            <input type="email" id="iemail">
            <br><br>
            <label for="inome">Nome</label><br>
            <input type="text" name="nome" id="inome">
            <br><br>
            <label for="isenha">Senha</label><br>
            <input type="password" id="isenha">
            <label for="ibotcadastro" id="log1">Cadastrar</label>
            <input type="submit" value="" id="ibotcadastro">
        </fieldset>
    </div>
    
    <div class="cadastro" id="paglogin">
        <fieldset>
            <legend><h1>Login</h1></legend>
            <img src="imagens/botao-x.png" alt="X" onclick="fechar()" id="xfechar">
            <label for="iemail">E-mail</label><br>
            <input type="email" id="iemail">
            <br><br>
            <label for="isenha">Senha</label><br>
            <input type="password" id="isenha">
            <label for="botlogin" id="log2">Login</label>
            <input type="submit" value="" id="botlogin">
        </fieldset>
    </div>

    
    <script>
        //Botao para rolar para o lado nos filmes
        
        function rolar(id, direcao) {
            const container = document.querySelector(`#${id} .classconteudo`);

            container.scrollBy({
                left: direcao * container.clientWidth * 0.5,
                behavior: 'smooth'
            });
        }


        /*-----------------------Funcionalidade para aparecer e fechar a pagina de login e singup----------------*/
        const pagsingup = document.getElementById("pagsingup");
        const paglogin = document.getElementById("paglogin");
        const xfechar = document.getElementById("xfechar");

        //aparecer pagina de singup
        function clicksingup() {

            if (pagsingup.style.display === 'block') {
                pagsingup.style.display = 'none';
            } 
            else {
                pagsingup.style.display = 'block';
                paglogin.style.display = 'none';
            }
        }

        //aparecer pagina de login
        function clicklogin() {

            if (paglogin.style.display === 'block') {
                paglogin.style.display = 'none';
            } else {
                paglogin.style.display = 'block';
                pagsingup.style.display = 'none';
            }
        }

        //botao de x para fechar pagina flutuante
        function fechar() {
            pagsingup.style.display = 'none';
            paglogin.style.display = 'none';
        }

        /* ------------------------------Pesquisa do filme------------------------------------------- */
        const apikey = '86afa933'

        //recebendo do form de pesquisa o nome do filme pesquisado
        const frmpesquisa = document.getElementById("pesquisa")

        frmpesquisa.onsubmit = (ev) =>{
            ev.preventDefault()

            const pesquisa = ev.target.pesquisar.value.trim()

            ev.target.pesquisar.blur()/*em cll ele tira o teclado da tela pois o formulario e o que estava com foco durante a pesquisa. ao clicar em enter no cll o form perde o foco e o teclado some*/


            if(pesquisa ===""){
                alert('Preencha o campo!')
                return
            }

        //localiza dados do filme/pesquisa na api
        fetch(`https://www.omdbapi.com/?apikey=${apikey}&s=${pesquisa}`) //api do omdbapi
            .then(result => result.json())
            .then(json => {
                if (json.Response === "False") {
                    alert("Nenhum filme encontrado!")
                    return
                }
                carregalista(json)
            })
            .catch(err => console.error(err))
        }
        /*mostra na tela o que pesquisou*/
        const carregalista = (json) =>{
            const lista = document.getElementById("contpesquisado") //a div do html vai aparecer os filmes
            const main = document.querySelector("main") //meu query main tem que sumir para aparecer a div
            main.style.display = 'none'

            lista.innerHTML=""

            if(json.Response == 'False'){
                alert('Nenhum filme encontrado :(')
                return
            }

        //criando uma div para cada filme encontrado que vai possuir um img e um h2 e vai possuir class conteudo
            json.Search.forEach(element =>{
                let item = document.createElement("div")
                item.classList.add("conteudo")

                item.innerHTML =`
                <img src="${element.Poster !== "N/A" ? element.Poster : "back"}">
                <h2>${element.Title}<h2> 
                `
                lista.appendChild(item)
            })
        }


    </script>
</body>
</html>